{
	"info": {
		"_postman_id": "941c385b-0016-4a7b-a309-5b1fea89a5e4",
		"name": "PaymentStack",
		"schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json"
	},
	"item": [
		{
			"name": "Create Payment Page",
			"event": [
				{
					"listen": "test",
					"script": {
						"id": "7ca7627e-f403-41d8-9047-5d602e9a76be",
						"exec": [
							"var jsonData = pm.response.json();\r",
							"var pageID = jsonData.data.id;\r",
							"pm.collectionVariables.set(\"pageID\" ,pageID);"
						],
						"type": "text/javascript"
					}
				}
			],
			"request": {
				"method": "POST",
				"header": [],
				"body": {
					"mode": "raw",
					"raw": "{\"name\" : \"Nethra S DashBoard\"}",
					"options": {
						"raw": {
							"language": "json"
						}
					}
				},
				"url": {
					"raw": "https://api.paystack.co/page",
					"protocol": "https",
					"host": [
						"api",
						"paystack",
						"co"
					],
					"path": [
						"page"
					]
				}
			},
			"response": []
		},
		{
			"name": "List Pages",
			"event": [
				{
					"listen": "test",
					"script": {
						"id": "53e685a4-014f-481f-82e8-e20d9061e58e",
						"exec": [
							"var jsonData = pm.response.json();\r",
							"var pageID = pm.collectionVariables.get(\"pageID\");\r",
							"console.log(\"Ids List Id\" + jsonData.data.length + \"PageId\" + pageID);\r",
							"for(var index=0;index<jsonData.data.length;index++)\r",
							"{\r",
							"   console.log(\"Page Id\" + jsonData.data[index].id);\r",
							"   pm.test(\"Check for Page ID\", function () {\r",
							"    pm.expect( jsonData.data[index].id).to.eql(pageID);\r",
							"   });\r",
							"   break;\r",
							"\r",
							"   /* pm.test(\"Body is correct\", function () {\r",
							"        pm.response.to.have.body( jsonData.data[index].id);\r",
							"    });*/\r",
							"    \r",
							"}\r",
							"\r",
							"\r",
							"pm.test(\"Body matches string\", function () {\r",
							"        pm.expect(pm.response.text()).to.include(pageID);\r",
							"    });"
						],
						"type": "text/javascript"
					}
				}
			],
			"protocolProfileBehavior": {
				"disableBodyPruning": true
			},
			"request": {
				"auth": {
					"type": "bearer",
					"bearer": [
						{
							"key": "token",
							"value": "sk_test_87cfdde2ed324a60065947e5586199871a144672",
							"type": "string"
						}
					]
				},
				"method": "GET",
				"header": [],
				"body": {
					"mode": "raw",
					"raw": ""
				},
				"url": {
					"raw": "https://api.paystack.co/page?perPage=50&page=1",
					"protocol": "https",
					"host": [
						"api",
						"paystack",
						"co"
					],
					"path": [
						"page"
					],
					"query": [
						{
							"key": "perPage",
							"value": "50"
						},
						{
							"key": "page",
							"value": "1"
						}
					]
				}
			},
			"response": []
		},
		{
			"name": "Create Plan",
			"event": [
				{
					"listen": "test",
					"script": {
						"id": "b71745ca-d50d-4c67-8d3f-ce7f575a4724",
						"exec": [
							"var planCode = pm.response.json().data.plan_code;\r",
							"//pm.globals.set(\"variable_key\", \"variable_value\");\r",
							"pm.globals.set(\"plan_code\",planCode);\r",
							""
						],
						"type": "text/javascript"
					}
				}
			],
			"request": {
				"method": "POST",
				"header": [],
				"body": {
					"mode": "raw",
					"raw": "{\r\n    \"name\":\"Yearly retainer\",\r\n    \"interval\" :\"daily\",\r\n    \"amount\" : \"2000000\"\r\n\r\n}",
					"options": {
						"raw": {
							"language": "json"
						}
					}
				},
				"url": {
					"raw": "https://api.paystack.co/plan",
					"protocol": "https",
					"host": [
						"api",
						"paystack",
						"co"
					],
					"path": [
						"plan"
					]
				}
			},
			"response": []
		},
		{
			"name": "Create Subscription",
			"request": {
				"auth": {
					"type": "oauth2",
					"oauth2": [
						{
							"key": "accessToken",
							"value": "sk_test_87cfdde2ed324a60065947e5586199871a144672",
							"type": "string"
						},
						{
							"key": "addTokenTo",
							"value": "header",
							"type": "string"
						}
					]
				},
				"method": "POST",
				"header": [],
				"body": {
					"mode": "raw",
					"raw": "{\r\n\"customer\":\"CUS_4olpzyx8uhk73kb\",\r\n\"plan\":\"PLN_9m8xs0cau21r6p1\"\r\n}",
					"options": {
						"raw": {
							"language": "json"
						}
					}
				},
				"url": {
					"raw": "https://api.paystack.co/subscription",
					"protocol": "https",
					"host": [
						"api",
						"paystack",
						"co"
					],
					"path": [
						"subscription"
					]
				}
			},
			"response": []
		},
		{
			"name": "Create Customer",
			"event": [
				{
					"listen": "test",
					"script": {
						"id": "ff1ab9a1-c1a5-43b5-a80b-7ecceb68c34b",
						"exec": [
							"var customerCode = pm.response.json().data.customer_code;\r",
							"\r",
							"pm.globals.set(\"customer_code\",customerCode );"
						],
						"type": "text/javascript"
					}
				}
			],
			"request": {
				"method": "POST",
				"header": [],
				"body": {
					"mode": "raw",
					"raw": "{\"email\" : \"ssnandy@gmail.com\",\r\n\"first_name\" : \"Nandhana\",\r\n\"last_name\"\t: \"S\",\r\n\"phone\" : \"9444468739\"\r\n}",
					"options": {
						"raw": {
							"language": "json"
						}
					}
				},
				"url": {
					"raw": "https://api.paystack.co/customer",
					"protocol": "https",
					"host": [
						"api",
						"paystack",
						"co"
					],
					"path": [
						"customer"
					]
				}
			},
			"response": []
		},
		{
			"name": "Create Transaction",
			"request": {
				"method": "POST",
				"header": [],
				"body": {
					"mode": "raw",
					"raw": "{\"email\" : \"ssnandy@gmail.com\",\r\n\"amount\" : \"10000000\",\r\n\"plan\": \"PLN_yrpnb7tl4txh9zi\" \r\n}",
					"options": {
						"raw": {
							"language": "json"
						}
					}
				},
				"url": {
					"raw": "https://api.paystack.co/transaction/initialize",
					"protocol": "https",
					"host": [
						"api",
						"paystack",
						"co"
					],
					"path": [
						"transaction",
						"initialize"
					]
				}
			},
			"response": []
		},
		{
			"name": "VerifyTransaction ",
			"request": {
				"method": "GET",
				"header": [],
				"url": {
					"raw": "https://api.paystack.co/transaction/verify/:reference",
					"protocol": "https",
					"host": [
						"api",
						"paystack",
						"co"
					],
					"path": [
						"transaction",
						"verify",
						":reference"
					],
					"variable": [
						{
							"key": "reference",
							"value": "jfnetnb43y"
						}
					]
				}
			},
			"response": []
		},
		{
			"name": "Enable Subscription",
			"request": {
				"method": "POST",
				"header": [],
				"body": {
					"mode": "raw",
					"raw": "{ \"code\": \"SUB_lhcque6no87hta7\", \"token\": \"l5na1wiqpy7qzqf\" }",
					"options": {
						"raw": {
							"language": "json"
						}
					}
				},
				"url": {
					"raw": "https://api.paystack.co/subscription/enable",
					"protocol": "https",
					"host": [
						"api",
						"paystack",
						"co"
					],
					"path": [
						"subscription",
						"enable"
					]
				}
			},
			"response": []
		},
		{
			"name": "Fetch Subscription",
			"request": {
				"method": "GET",
				"header": [],
				"url": {
					"raw": "https://api.paystack.co/subscription/:id_or_code",
					"protocol": "https",
					"host": [
						"api",
						"paystack",
						"co"
					],
					"path": [
						"subscription",
						":id_or_code"
					],
					"variable": [
						{
							"key": "id_or_code",
							"value": "187717"
						}
					]
				}
			},
			"response": []
		},
		{
			"name": "Get Payment Page",
			"event": [
				{
					"listen": "prerequest",
					"script": {
						"id": "04b175de-d7ad-4fff-ac6a-341e113476bf",
						"exec": [
							"var pageID = pm.collectionVariables.get(\"pageID\");"
						],
						"type": "text/javascript"
					}
				}
			],
			"request": {
				"method": "GET",
				"header": [],
				"url": {
					"raw": "https://api.paystack.co/page/:id_or_slug",
					"protocol": "https",
					"host": [
						"api",
						"paystack",
						"co"
					],
					"path": [
						"page",
						":id_or_slug"
					],
					"variable": [
						{
							"key": "id_or_slug",
							"value": "{{pageID}}"
						}
					]
				}
			},
			"response": []
		},
		{
			"name": "Disable subscription",
			"request": {
				"method": "POST",
				"header": [],
				"body": {
					"mode": "raw",
					"raw": "{\r\n    \"code\" :  \"SUB_lhcque6no87hta7\",\r\n    \"token\" : \"l5na1wiqpy7qzqf\"\r\n}",
					"options": {
						"raw": {
							"language": "json"
						}
					}
				},
				"url": {
					"raw": "https://api.paystack.co/subscription/disable",
					"protocol": "https",
					"host": [
						"api",
						"paystack",
						"co"
					],
					"path": [
						"subscription",
						"disable"
					]
				}
			},
			"response": []
		}
	],
	"auth": {
		"type": "oauth2",
		"oauth2": [
			{
				"key": "accessToken",
				"value": "sk_test_87cfdde2ed324a60065947e5586199871a144672",
				"type": "string"
			},
			{
				"key": "addTokenTo",
				"value": "header",
				"type": "string"
			}
		]
	},
	"event": [
		{
			"listen": "prerequest",
			"script": {
				"id": "ce8fbb5a-43de-49d6-8ab0-c386da0120b4",
				"type": "text/javascript",
				"exec": [
					""
				]
			}
		},
		{
			"listen": "test",
			"script": {
				"id": "5f4840ad-ea31-4cde-8d46-b23fce0ef28a",
				"type": "text/javascript",
				"exec": [
					""
				]
			}
		}
	],
	"variable": [
		{
			"id": "2aba12b1-fb5d-4b2b-949f-882963e3faf9",
			"key": "plan_code",
			"value": ""
		},
		{
			"id": "5a8bca91-5ef7-4035-8686-6cfb72025790",
			"key": "pageID",
			"value": ""
		}
	],
	"protocolProfileBehavior": {}
}